# DeepSparse

本页面介绍如何在LangChain中使用[DeepSparse](https://github.com/neuralmagic/deepsparse)推理运行时。
它分为两个部分：安装和设置，以及DeepSparse使用示例。

## 安装和设置

- 使用`pip install deepsparse`安装Python包
- 选择一个[SparseZoo模型](https://sparsezoo.neuralmagic.com/?useCase=text_generation)或将支持模型导出为ONNX格式[使用Optimum](https://github.com/neuralmagic/notebooks/blob/main/notebooks/opt-text-generation-deepsparse-quickstart/OPT_Text_Generation_DeepSparse_Quickstart.ipynb)


## 大型语言模型

存在一个DeepSparse LLM包装器，您可以通过以下方式访问：

```python
from langchain_community.llms import DeepSparse
```

它为所有模型提供了统一的接口：

```python
llm = DeepSparse(model='zoo:nlg/text_generation/codegen_mono-350m/pytorch/huggingface/bigpython_bigquery_thepile/base-none')

print(llm.invoke('def fib():'))
```

可以使用 `config` 参数传递额外的参数：

```python
config = {'max_generated_tokens': 256}

llm = DeepSparse(model='zoo:nlg/text_generation/codegen_mono-350m/pytorch/huggingface/bigpython_bigquery_thepile/base-none', config=config)
```
